

{% block tools %}
<div class="tools">
      <h3>Adicionando uma nova receita</h3>
      <button type="submit">Salvar receita</button>
</div>

{% endblock %}

<div class="item">
      <div>Imagem</div>
      <div>
            <input 
            type="url" 
            name="image" 
            value="{{recipe.image}}">
      </div>
</div>

<div class="item">
      <div>Título</div>
      <div>
            <input type="text" name="title" value="{{recipe.title}}">
      </div>
</div>

<div class="item">
      <div>Chef</div>
      <div>
            <input type="text" name="author" value="{{recipe.chef}}" placeholder="selecione um chef">
      </div>
</div>

<div class="item">
      <div>Ingredientes</div>
      <div id="ingredients">
            <div class="ingredient">
                  <input type="text" name="ingredients[]" value="{{recipe.ingredients}}"/>
            </div>
      </div>
      <a class="add-ingredient">Adicionar novo ingrediente</a>
</div>


<div class="item">
      <div>Modo de preparo</div>
      <div id="preparations">
            <div class="preparation">
                  <input type="text" name="preparations[]" value="{{recipe.preparations}}"/>
            </div>
      </div>
      <a class="add-preparation">Adicionar novo passo</a>
</div>

<div class="item">
      <div>Informações adicionais</div>
      <div>
            <input type="text" name="information" value="{{recipe.information}}" style="min-height: 200px;">
      </div>
</div>


<script>

function addIngredient() {
  const ingredients = document.querySelector("#ingredients");
  const fieldContainer = document.querySelectorAll(".ingredient");

  // Realiza um clone do último ingrediente adicionado
  const newField = fieldContainer[fieldContainer.length - 1].cloneNode(true);

  // Não adiciona um novo input se o último tem um valor vazio
  if (newField.children[0].value == "") return false;

  // Deixa o valor do input vazio
  newField.children[0].value = "";
  ingredients.appendChild(newField);
}

document
  .querySelector(".add-ingredient")
  .addEventListener("click", addIngredient);



function addPreparation() {
  const preparations = document.querySelector("#preparations");
  const fieldContainer = document.querySelectorAll(".preparation");

  // Realiza um clone do último ingrediente adicionado
  const newField = fieldContainer[fieldContainer.length - 1].cloneNode(true);

  // Não adiciona um novo input se o último tem um valor vazio
  if (newField.children[0].value == "") return false;

  // Deixa o valor do input vazio
  newField.children[0].value = "";
  preparations.appendChild(newField);
}

document
  .querySelector(".add-preparation")
  .addEventListener("click", addPreparation);



</script>